name: "Overweight-Guard"
description: "Extensible bundle size guard with pluggable testers."
author: "Yoav Niran"
inputs:
  config:
    description: "Path to an overweight configuration file."
    required: false
  files:
    description: "JSON string that overrides the configuration files array."
    required: false
  working-directory:
    description: "Directory to run the checks from."
    required: false
  github-token:
    description: "Token used to comment on pull requests."
    required: false
  comment-on-pr:
    description: "Comment on pull requests when checks fail."
    required: false
    default: "true"
  comment-on-pr-always:
    description: "Also comment on the first PR run even when all checks pass."
    required: false
    default: "false"
  comment-on-pr-each-run:
    description: "Comment on every PR run regardless of the result."
    required: false
    default: "false"
  baseline-report-path:
    description: "Optional path to a JSON file with baseline results. Defaults to `report-file` when omitted and `update-baseline` is true."
    required: false
  update-baseline:
    description: "When true, commit the updated baseline to a new branch and open a pull request."
    required: false
    default: "false"
  update-pr-title:
    description: "Title of the pull request created when update-baseline is true."
    required: false
    default: "chore: update baseline report"
  update-pr-body:
    description: "Body of the pull request created when update-baseline is true."
    required: false
    default: "Automatic pull request updating the overweight baseline report."
  update-branch-prefix:
    description: "Prefix for the temporary branch that carries the baseline update."
    required: false
    default: "overweight/baseline"
  report-file:
    description: "File path where the json report will be written."
    required: false
    default: "overweight-report.json"
outputs:
  report-json:
    description: "Serialized JSON report describing every bundle check."
  report-table:
    description: "HTML table that can be posted as a PR comment."
  has-failures:
    description: "true if any check failed."
  baseline-updated:
    description: "true if the baseline report file was updated."
  report-file:
    description: "Absolute path to the generated json report."
  baseline-update-pr-url:
    description: "URL of the pull request created for the baseline update."
  baseline-update-pr-number:
    description: "Number of the pull request created for the baseline update."
runs:
  using: "node20"
  main: "dist/action/index.js"
branding:
  color: "orange"
  icon: "briefcase"

