{"version":3,"sources":["../../src/testers/brotli.js","../../src/testers/gzip.js","../../src/testers/none.js","../../src/testers/shared.js","../../src/testers/index.js","../../src/utils/size.js","../../src/config/load-config.js","../../src/files/resolve-files.js","../../src/core/run-checks.js","../../src/reporters/json-file-reporter.js","../../src/action/index.js"],"names":["promisify","fs","path"],"mappings":"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","file":"index.js","sourcesContent":["import { promisify } from \"node:util\";\nimport { brotliCompress, constants } from \"node:zlib\";\n\nconst brotliAsync = promisify(brotliCompress);\n\nexport const brotliTester = {\n  id: \"brotli\",\n  label: \"brotli\",\n  measure: async (buffer) => {\n    const compressed = await brotliAsync(buffer, {\n      params: {\n        [constants.BROTLI_PARAM_MODE]: constants.BROTLI_MODE_TEXT,\n        [constants.BROTLI_PARAM_QUALITY]: 11\n      }\n    });\n\n    return { bytes: compressed.byteLength };\n  }\n};\n\n","import { promisify } from \"node:util\";\nimport { gzip } from \"node:zlib\";\n\nconst gzipAsync = promisify(gzip);\n\nexport const gzipTester = {\n  id: \"gzip\",\n  label: \"gzip\",\n  measure: async (buffer) => {\n    const compressed = await gzipAsync(buffer);\n    return { bytes: compressed.byteLength };\n  }\n};\n\n","export const noneTester = {\n  id: \"none\",\n  label: \"raw\",\n  measure: async (buffer) => ({ bytes: buffer.byteLength })\n};\n\n","export const DEFAULT_TESTER_ID = \"gzip\";\nexport const NORMALIZED_TOKENS = new Set([\"none\", \"gzip\", \"brotli\"]);\n\nexport const createTester = ({ id, label, measure }) => {\n  if (!id || typeof measure !== \"function\") {\n    throw new Error(\"Tester definitions must include an id and a measure function\");\n  }\n\n  return {\n    id,\n    label: label || id,\n    measure\n  };\n};\n\nexport const normalizeTesterId = (value) => {\n  if (!value) {\n    return DEFAULT_TESTER_ID;\n  }\n\n  const normalized = value.toLowerCase();\n  return NORMALIZED_TOKENS.has(normalized) ? normalized : value;\n};\n\n","import { brotliTester } from \"./brotli.js\";\nimport { gzipTester } from \"./gzip.js\";\nimport { noneTester } from \"./none.js\";\nimport { DEFAULT_TESTER_ID, createTester, normalizeTesterId } from \"./shared.js\";\n\nexport { DEFAULT_TESTER_ID } from \"./shared.js\";\n\nconst builtinTesters = new Map(\n  [noneTester, gzipTester, brotliTester].map((tester) => [tester.id, createTester(tester)])\n);\n\nexport const createTesterRegistry = (customTesters) => {\n  const registry = new Map(builtinTesters);\n\n  if (customTesters) {\n    const entries = customTesters instanceof Map ? customTesters.entries() : Object.entries(customTesters);\n\n    for (const [, tester] of entries) {\n      const normalizedTester = createTester(tester);\n      registry.set(normalizedTester.id, normalizedTester);\n    }\n  }\n\n  return registry;\n};\n\nexport const getTester = (testerId, registry) => {\n  const normalized = normalizeTesterId(testerId);\n  const tester = registry.get(normalized);\n\n  if (!tester) {\n    throw new Error(`Unknown tester \"${testerId}\"`);\n  }\n\n  return tester;\n};\n\nexport const listTesters = () =>\n  Array.from(builtinTesters.values()).map((tester) => ({\n    id: tester.id,\n    label: tester.label\n  }));\n\n","import prettyBytes from \"pretty-bytes\";\n\nconst UNIT_FACTORS = {\n  b: 1,\n  byte: 1,\n  bytes: 1,\n  k: 1_000,\n  kb: 1_000,\n  kib: 1_024,\n  m: 1_000_000,\n  mb: 1_000_000,\n  mib: 1_048_576,\n  g: 1_000_000_000,\n  gb: 1_000_000_000,\n  gib: 1_073_741_824\n};\n\nexport const formatBytes = (value) => prettyBytes(Math.max(0, value), { binary: false });\n\nexport const formatDiff = (diff) => {\n  if (diff === 0) {\n    return \"0 B\";\n  }\n\n  const sign = diff > 0 ? \"+\" : \"-\";\n  return `${sign}${formatBytes(Math.abs(diff))}`;\n};\n\nexport const parseSize = (value) => {\n  if (typeof value === \"number\" && Number.isFinite(value)) {\n    return value;\n  }\n\n  if (typeof value !== \"string\") {\n    throw new Error(`Unsupported size value. Expected string or number, received: ${typeof value}`);\n  }\n\n  const normalized = value.trim().toLowerCase().replace(/\\s+/g, \"\");\n  const match = normalized.match(/^(-?\\d+(?:\\.\\d+)?)([a-z]+)?$/i);\n\n  if (!match) {\n    throw new Error(`Invalid size format: \"${value}\"`);\n  }\n\n  const [, rawNumber, rawUnit] = match;\n  const unit = rawUnit || \"b\";\n  const factor = UNIT_FACTORS[unit];\n\n  if (!factor) {\n    throw new Error(`Unknown size unit \"${unit}\" in value \"${value}\"`);\n  }\n\n  const numericValue = Number(rawNumber);\n\n  if (!Number.isFinite(numericValue)) {\n    throw new Error(`Invalid numeric size: \"${value}\"`);\n  }\n\n  return Math.round(numericValue * factor);\n};\n\nexport const toDisplaySize = (original, bytes) => {\n  if (typeof original === \"string\" && original.trim().length) {\n    return original.trim();\n  }\n\n  return formatBytes(bytes);\n};\n\n","import fs from \"node:fs/promises\";\nimport path from \"node:path\";\n\nimport { z } from \"zod\";\n\nimport { DEFAULT_TESTER_ID } from \"../testers/index.js\";\nimport { formatBytes, parseSize, toDisplaySize } from \"../utils/size.js\";\n\nconst NORMALIZED_CONFIG_FLAG = Symbol.for(\"overweight.normalizedConfig\");\n\nconst FileSchema = z.object({\n  path: z.string().min(1, \"Each file rule requires a path or glob pattern\"),\n  maxSize: z.union([z.string(), z.number()]),\n  compression: z.string().optional(),\n  label: z.string().optional()\n});\n\nconst ConfigSchema = z.object({\n  root: z.string().optional(),\n  defaultCompression: z.string().optional(),\n  files: z.array(FileSchema).min(1, \"Provide at least one file rule to check\")\n});\n\nconst ensureArrayConfig = (input) => (Array.isArray(input) ? { files: input } : input);\n\nconst fileExists = async (targetPath) => {\n  try {\n    await fs.access(targetPath);\n    return true;\n  } catch {\n    return false;\n  }\n};\n\nconst readJson = async (targetPath) => {\n  const raw = await fs.readFile(targetPath, \"utf-8\");\n\n  try {\n    return JSON.parse(raw);\n  } catch (error) {\n    throw new Error(`Failed to parse JSON file at ${targetPath}: ${error.message}`);\n  }\n};\n\nexport const isNormalizedConfig = (config) => Boolean(config?.[NORMALIZED_CONFIG_FLAG]);\n\nexport const normalizeConfig = (rawConfig, { cwd, source } = {}) => {\n  const configRoot = path.resolve(cwd || process.cwd());\n  const parsed = ConfigSchema.parse(ensureArrayConfig(rawConfig));\n  const defaultCompression = (parsed.defaultCompression || DEFAULT_TESTER_ID).toLowerCase();\n\n  const normalized = {\n    root: parsed.root ? path.resolve(configRoot, parsed.root) : configRoot,\n    defaultCompression,\n    files: parsed.files.map((file) => {\n      const maxBytes = parseSize(file.maxSize);\n\n      if (maxBytes < 0) {\n        throw new Error(`maxSize for \"${file.path}\" must be greater than or equal to zero`);\n      }\n\n      const compression = (file.compression || defaultCompression).toLowerCase();\n\n      return {\n        path: file.path,\n        pattern: file.path,\n        label: file.label || file.path,\n        compression,\n        maxBytes,\n        maxSizeInput: file.maxSize,\n        maxDisplay: toDisplaySize(file.maxSize, maxBytes),\n        maxFormatted: formatBytes(maxBytes)\n      };\n    }),\n    source: source || { type: \"inline\" }\n  };\n\n  normalized[NORMALIZED_CONFIG_FLAG] = true;\n  return normalized;\n};\n\nexport const loadConfig = async ({ cwd = process.cwd(), configPath, inlineConfig } = {}) => {\n  const root = path.resolve(cwd);\n\n  if (inlineConfig) {\n    return normalizeConfig(inlineConfig, { cwd: root, source: { type: \"inline\" } });\n  }\n\n  const tryLoadConfig = async (candidatePath) => {\n    if (!(await fileExists(candidatePath))) {\n      return null;\n    }\n\n    const data = await readJson(candidatePath);\n    return normalizeConfig(data, { cwd: root, source: { type: \"file\", location: candidatePath } });\n  };\n\n  if (configPath) {\n    const absoluteConfig = path.resolve(root, configPath);\n    const loaded = await tryLoadConfig(absoluteConfig);\n\n    if (!loaded) {\n      throw new Error(`Could not find config file at \"${absoluteConfig}\"`);\n    }\n\n    return loaded;\n  }\n\n  const defaultConfigPaths = [\"overweight.json\", \"overweight.config.json\"].map((file) =>\n    path.join(root, file)\n  );\n\n  for (const candidate of defaultConfigPaths) {\n    const loaded = await tryLoadConfig(candidate);\n\n    if (loaded) {\n      return loaded;\n    }\n  }\n\n  const packageJsonPath = path.join(root, \"package.json\");\n\n  if (await fileExists(packageJsonPath)) {\n    const pkgJson = await readJson(packageJsonPath);\n    const field = pkgJson.overweight;\n\n    if (field) {\n      return normalizeConfig(ensureArrayConfig(field), {\n        cwd: root,\n        source: { type: \"package\", location: packageJsonPath }\n      });\n    }\n  }\n\n  throw new Error(\n    \"No overweight configuration found. Create an overweight.json (or overweight.config.json) file, add an `overweight` field to package.json, or pass --config.\"\n  );\n};\n\nexport const NORMALIZED_FLAG = NORMALIZED_CONFIG_FLAG;\n\n","import path from \"node:path\";\n\nimport fg from \"fast-glob\";\n\nexport const resolveFiles = async (pattern, { root }) => {\n  const matches = await fg(pattern, {\n    cwd: root,\n    absolute: true,\n    dot: true,\n    onlyFiles: true\n  });\n\n  const unique = Array.from(new Set(matches));\n\n  return unique.map((absolutePath) => ({\n    absolutePath,\n    relativePath: path.relative(root, absolutePath) || path.basename(absolutePath)\n  }));\n};\n\n","import fs from \"node:fs/promises\";\n\nimport { normalizeConfig, isNormalizedConfig } from \"../config/load-config.js\";\nimport { resolveFiles } from \"../files/resolve-files.js\";\nimport { createTesterRegistry, getTester } from \"../testers/index.js\";\nimport { formatBytes, formatDiff } from \"../utils/size.js\";\n\nconst buildMissingResult = (rule) => ({\n  pattern: rule.pattern,\n  label: rule.label,\n  filePath: rule.pattern,\n  tester: rule.compression,\n  testerLabel: rule.compression,\n  size: null,\n  sizeFormatted: \"N/A\",\n  maxSizeFormatted: rule.maxFormatted,\n  maxSize: rule.maxBytes,\n  diff: null,\n  diffFormatted: \"N/A\",\n  passed: false,\n  error: \"No files matched this pattern\"\n});\n\nconst markNormalized = (config) =>\n  normalizeConfig(config, {\n    cwd: config.root || process.cwd(),\n    source: config.source || { type: \"inline\" }\n  });\n\nexport const runChecks = async (rawConfig, options = {}) => {\n  const normalizedConfig = isNormalizedConfig(rawConfig) ? rawConfig : markNormalized(rawConfig);\n  const registry = createTesterRegistry(options.testers);\n\n  const results = [];\n\n  for (const fileRule of normalizedConfig.files) {\n    const tester = getTester(fileRule.compression || normalizedConfig.defaultCompression, registry);\n    const matches = await resolveFiles(fileRule.pattern, { root: normalizedConfig.root });\n\n    if (!matches.length) {\n      results.push(buildMissingResult(fileRule));\n      continue;\n    }\n\n    for (const match of matches) {\n      const buffer = await fs.readFile(match.absolutePath);\n      const measurement = await tester.measure(buffer, {\n        filePath: match.absolutePath,\n        pattern: fileRule.pattern\n      });\n\n      const size = Number(measurement?.bytes);\n\n      if (!Number.isFinite(size)) {\n        throw new Error(`Tester \"${tester.id}\" did not return a numeric size for \"${match.relativePath}\"`);\n      }\n\n      const diff = size - fileRule.maxBytes;\n      const passed = diff <= 0;\n\n      results.push({\n        pattern: fileRule.pattern,\n        label: fileRule.label,\n        filePath: match.relativePath,\n        absolutePath: match.absolutePath,\n        tester: tester.id,\n        testerLabel: tester.label,\n        size,\n        sizeFormatted: formatBytes(size),\n        maxSizeFormatted: fileRule.maxFormatted,\n        maxSize: fileRule.maxBytes,\n        diff,\n        diffFormatted: formatDiff(diff),\n        passed\n      });\n    }\n  }\n\n  const failures = results.filter((entry) => !entry.passed || entry.error);\n\n  return {\n    results,\n    stats: {\n      files: results.length,\n      failures,\n      hasFailures: failures.length > 0,\n      hasErrors: failures.some((entry) => Boolean(entry.error))\n    }\n  };\n};\n\n","import fs from \"node:fs\";\nimport path from \"node:path\";\n\nconst DEFAULT_FILE = \"overweight-report.json\";\n\nconst resolveTargetPath = (target, cwd = process.cwd()) => {\n  if (!target) {\n    return path.join(cwd, DEFAULT_FILE);\n  }\n\n  return path.isAbsolute(target) ? target : path.join(cwd, target);\n};\n\nexport const jsonFileReporter = (result, options = {}) => {\n  const filePath = resolveTargetPath(options.reportFile, options.cwd);\n\n  fs.mkdirSync(path.dirname(filePath), { recursive: true });\n  fs.writeFileSync(filePath, JSON.stringify(result, null, 2));\n\n  if (!options.silent) {\n    console.log(`Saved Overweight report to ${filePath}`);\n  }\n};\n\n","import fs from \"node:fs/promises\";\nimport path from \"node:path\";\nimport { Buffer } from \"node:buffer\";\n\nimport core from \"@actions/core\";\nimport github from \"@actions/github\";\n\nimport { loadConfig, normalizeConfig } from \"../config/load-config.js\";\nimport { runChecks } from \"../core/run-checks.js\";\nimport { jsonFileReporter } from \"../reporters/json-file-reporter.js\";\nimport { formatDiff } from \"../utils/size.js\";\n\nconst BOT_COMMIT_IDENTITY = {\n  name: \"Overweight Bot\",\n  email: \"ci-bot@overweight-gh-action.com\"\n};\n\nconst statusEmoji = (row) => {\n  if (row.error) {\n    return \"ðŸ’¥\";\n  }\n\n  return row.status === \"pass\" ? \"ðŸŸ¢\" : \"ðŸ”º\";\n};\n\nconst buildSummaryRows = (results) =>\n  results.map((entry) => ({\n    label: entry.label,\n    file: entry.filePath,\n    tester: entry.testerLabel,\n    size: entry.sizeFormatted,\n    sizeBytes: typeof entry.size === \"number\" ? entry.size : 0,\n    limit: entry.maxSizeFormatted,\n    limitBytes: entry.maxSize,\n    diff: entry.diffFormatted,\n    diffBytes: typeof entry.diff === \"number\" ? entry.diff : 0,\n    status: entry.error ? \"error\" : entry.passed ? \"pass\" : \"fail\",\n    error: entry.error || null\n  }));\n\nconst readBaselineState = async (baselinePath) => {\n  try {\n    const raw = await fs.readFile(baselinePath, \"utf-8\");\n    let data = null;\n\n    try {\n      data = JSON.parse(raw);\n    } catch {\n      data = null;\n    }\n\n    return { raw, data };\n  } catch {\n    return { raw: null, data: null };\n  }\n};\n\nconst buildBaselineSnapshot = (rows) =>\n  [...rows]\n    .map((row) => ({\n      label: row.label,\n      file: row.file,\n      tester: row.tester,\n      size: row.size,\n      sizeBytes: row.sizeBytes,\n      limit: row.limit,\n      limitBytes: row.limitBytes\n    }))\n    .sort((a, b) => a.file.localeCompare(b.file));\n\nconst serializeBaselineSnapshot = (rows) => JSON.stringify(buildBaselineSnapshot(rows), null, 2);\n\nconst writeBaseline = async (baselinePath, rows, precomputedContent) => {\n  await fs.mkdir(path.dirname(baselinePath), { recursive: true });\n  const content = precomputedContent ?? serializeBaselineSnapshot(rows);\n  await fs.writeFile(baselinePath, content);\n};\n\nconst getBaselineUpdateInfo = async (baselinePath, rows, previousContent = undefined) => {\n  const nextContent = serializeBaselineSnapshot(rows);\n\n  if (previousContent !== undefined) {\n    return {\n      needsUpdate: previousContent === null ? true : previousContent !== nextContent,\n      content: nextContent\n    };\n  }\n\n  try {\n    const currentContent = await fs.readFile(baselinePath, \"utf-8\");\n    return { needsUpdate: currentContent !== nextContent, content: nextContent };\n  } catch (error) {\n    if (error.code === \"ENOENT\") {\n      return { needsUpdate: true, content: nextContent };\n    }\n\n    throw error;\n  }\n};\n\nconst mergeWithBaseline = (rows, baseline) => {\n  if (!baseline) {\n    return rows;\n  }\n\n  const map = new Map(baseline.map((row) => [row.file, row]));\n\n  return rows.map((row) => {\n    const previous = map.get(row.file);\n\n    if (!previous) {\n      return { ...row, baselineSize: \"N/A\", baselineDiff: \"N/A\", trend: \"N/A\" };\n    }\n\n    const delta = row.sizeBytes - (previous.sizeBytes || 0);\n\n    return {\n      ...row,\n      baselineSize: previous.size,\n      baselineDiff: formatDiff(delta),\n      trend: delta === 0 ? \"âž–\" : delta > 0 ? \"ðŸ”º\" : \"â¬‡\"\n    };\n  });\n};\n\nconst toTableData = (rows) => [\n  [\n    { data: \"Status\", header: true },\n    { data: \"Label\", header: true },\n    { data: \"File\", header: true },\n    { data: \"Size\", header: true },\n    { data: \"Limit\", header: true },\n    { data: \"Î”\", header: true },\n    { data: \"Trend\", header: true }\n  ],\n  ...rows.map((row) => [\n    { data: statusEmoji(row) },\n    { data: row.label },\n    { data: row.file },\n    { data: row.size },\n    { data: row.limit },\n    { data: row.diff },\n    { data: row.trend || \"N/A\" }\n  ])\n];\n\nconst renderHtmlTable = (rows) => {\n  const header = [\"Status\", \"Label\", \"File\", \"Size\", \"Limit\", \"Î”\", \"Trend\"]\n    .map((title) => `<th>${title}</th>`)\n    .join(\"\");\n  const body = rows\n    .map(\n      (row) =>\n        `<tr><td>${statusEmoji(row)}</td><td>${row.label}</td><td>${row.file}</td><td>${row.size}</td><td>${row.limit}</td><td>${row.diff}</td><td>${row.trend || \"N/A\"}</td></tr>`\n    )\n    .join(\"\");\n\n  return `<table><thead><tr>${header}</tr></thead><tbody>${body}</tbody></table>`;\n};\n\nconst buildInlineConfig = (input) => {\n  if (!input) {\n    return null;\n  }\n\n  try {\n    const parsed = JSON.parse(input);\n    return Array.isArray(parsed) ? { files: parsed } : parsed;\n  } catch (error) {\n    throw new Error(`Failed to parse \\`files\\` input: ${error.message}`);\n  }\n};\n\nconst resolveWorkingDirectory = (input) =>\n  input ? path.resolve(process.cwd(), input) : process.cwd();\n\nconst DEFAULT_PROTECTED_BRANCHES = [\"main\", \"master\"];\n\nconst parseProtectedBranchPatterns = (input) => {\n  const raw = input && input.trim().length ? input : DEFAULT_PROTECTED_BRANCHES.join(\",\");\n\n  return raw\n    .split(\",\")\n    .map((entry) => entry.trim())\n    .filter(Boolean);\n};\n\nconst escapeRegex = (value) => value.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\nconst patternToRegex = (pattern) =>\n  new RegExp(`^${pattern.split(\"*\").map((segment) => escapeRegex(segment)).join(\".*\")}$`);\n\nconst branchMatchesPattern = (branch, pattern) => {\n  if (!pattern || !branch) {\n    return false;\n  }\n\n  return patternToRegex(pattern).test(branch);\n};\n\nconst isBranchProtected = (branch, patterns) =>\n  Boolean(branch) && patterns.some((pattern) => branchMatchesPattern(branch, pattern));\n\nconst getWorkspaceRoot = () => process.env.GITHUB_WORKSPACE || process.cwd();\n\nconst ensureRelativePath = (absolutePath) => {\n  const workspaceRoot = getWorkspaceRoot();\n  const relative = path.relative(workspaceRoot, absolutePath);\n\n  if (relative.startsWith(\"..\")) {\n    throw new Error(\n      `Baseline path \"${absolutePath}\" is outside of the repository checkout (${workspaceRoot}).`\n    );\n  }\n\n  return relative.replace(/\\\\/g, \"/\");\n};\n\nconst sanitizeBranchPrefix = (prefix) =>\n  `${prefix || \"overweight/baseline\"}`.replace(/\\/+$/, \"\");\n\nconst sanitizeBranchSuffix = (suffix) =>\n  suffix ? suffix.replace(/[^0-9A-Za-z._-]+/g, \"-\") : \"\";\n\nconst buildUpdateBranchName = ({ prefix, prNumber, currentBranch }) => {\n  const suffix =\n    prNumber != null\n      ? `pr-${prNumber}`\n      : sanitizeBranchSuffix(currentBranch) || `run-${github.context.runId || Date.now()}`;\n\n  return `${sanitizeBranchPrefix(prefix)}/${suffix}`;\n};\n\nconst resolveBaseBranch = () =>\n  github.context.payload.pull_request?.base?.ref ||\n  process.env.GITHUB_REF_NAME ||\n  process.env.GITHUB_REF?.split(\"/\").pop() ||\n  \"main\";\n\nconst ensureUpdateBranchExists = async ({ octokit, branchName, baseBranch }) => {\n  const { owner, repo } = github.context.repo;\n\n  try {\n    await octokit.rest.git.getRef({\n      owner,\n      repo,\n      ref: `heads/${branchName}`\n    });\n    return true;\n  } catch (error) {\n    if (error.status !== 404) {\n      throw error;\n    }\n  }\n\n  const baseRef = await octokit.rest.git.getRef({\n    owner,\n    repo,\n    ref: `heads/${baseBranch}`\n  });\n\n  const baseSha = baseRef.data.object?.sha || baseRef.data.sha;\n\n  await octokit.rest.git.createRef({\n    owner,\n    repo,\n    ref: `refs/heads/${branchName}`,\n    sha: baseSha\n  });\n\n  return false;\n};\n\nconst getExistingFileSha = async ({ octokit, branchName, path: repoPath }) => {\n  const { owner, repo } = github.context.repo;\n\n  try {\n    const response = await octokit.rest.repos.getContent({\n      owner,\n      repo,\n      path: repoPath,\n      ref: branchName\n    });\n\n    if (!Array.isArray(response.data) && response.data.type === \"file\") {\n      return response.data.sha;\n    }\n\n    return undefined;\n  } catch (error) {\n    if (error.status === 404) {\n      return undefined;\n    }\n\n    throw error;\n  }\n};\n\nconst findExistingBaselinePr = async ({ octokit, branchName }) => {\n  const { owner, repo } = github.context.repo;\n\n  const prs = await octokit.rest.pulls.list({\n    owner,\n    repo,\n    head: `${owner}:${branchName}`,\n    state: \"open\",\n    per_page: 1\n  });\n\n  return prs.data?.[0] || null;\n};\n\nconst findPrNumberForBranch = async ({ octokit, branch }) => {\n  if (!branch) {\n    return null;\n  }\n\n  const { owner, repo } = github.context.repo;\n  const prs = await octokit.rest.pulls.list({\n    owner,\n    repo,\n    head: `${owner}:${branch}`,\n    state: \"open\",\n    per_page: 1\n  });\n\n  const pr = prs.data?.[0];\n  return pr?.number ?? null;\n};\n\nconst resolveConfig = async () => {\n  const configInput = core.getInput(\"config\");\n  const filesInput = core.getInput(\"files\");\n  const cwd = resolveWorkingDirectory(core.getInput(\"working-directory\"));\n  const inlineConfig = buildInlineConfig(filesInput);\n\n  if (inlineConfig) {\n    return normalizeConfig(inlineConfig, { cwd, source: { type: \"inline\" } });\n  }\n\n  return loadConfig({ cwd, configPath: configInput || undefined });\n};\n\nconst REPORT_MARKER = \"<!-- overweight-report -->\";\n\nconst findExistingReportComment = async (octokit, pullRequest) => {\n  const { owner, repo } = github.context.repo;\n  const existingComments = await octokit.rest.issues.listComments({\n    owner,\n    repo,\n    issue_number: pullRequest.number,\n    per_page: 100\n  });\n\n  const existing = existingComments.data\n    .filter((comment) => comment?.user?.type === \"Bot\" && comment?.body?.includes(REPORT_MARKER))\n    .sort((a, b) => new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime())[0];\n\n  return existing || null;\n};\n\nconst commentOnPullRequest = async ({ octokit, pullRequest, body, existingComment }) => {\n  if (!pullRequest) {\n    core.info(\"No pull request found in the event payload; skipping comment.\");\n    return;\n  }\n\n  const isFork =\n    pullRequest.head?.repo?.full_name &&\n    pullRequest.base?.repo?.full_name &&\n    pullRequest.head.repo.full_name !== pullRequest.base.repo.full_name;\n\n  if (isFork) {\n    core.info(\"Skipping pull request comment because the PR originates from a fork.\");\n    return;\n  }\n\n  const previous =\n    existingComment !== undefined\n      ? existingComment\n      : await findExistingReportComment(octokit, pullRequest);\n\n  const commentBody = `${REPORT_MARKER}\\n${body}`;\n\n  try {\n    if (previous) {\n      await octokit.rest.issues.updateComment({\n        owner: github.context.repo.owner,\n        repo: github.context.repo.repo,\n        comment_id: previous.id,\n        body: commentBody\n      });\n    } else {\n      await octokit.rest.issues.createComment({\n        repo: github.context.repo.repo,\n        owner: github.context.repo.owner,\n        issue_number: pullRequest.number,\n        body: commentBody\n      });\n    }\n  } catch (error) {\n    if (error.status === 403) {\n      core.warning(\n        `Unable to comment on pull request due to permissions (403). Message: ${error.message}`\n      );\n      return;\n    }\n\n    throw error;\n  }\n};\n\nconst getBranchName = () =>\n  process.env.GITHUB_REF_NAME || process.env.GITHUB_REF?.split(\"/\").pop() || \"\";\n\nexport const runAction = async () => {\n  try {\n    const config = await resolveConfig();\n    const githubToken = core.getInput(\"github-token\");\n    const octokit = githubToken ? github.getOctokit(githubToken) : null;\n    const commentOnFailure = core.getBooleanInput(\"comment-on-pr\");\n    const commentOnFirstRun = core.getBooleanInput(\"comment-on-pr-always\");\n    const commentOnEachRun = core.getBooleanInput(\"comment-on-pr-each-run\");\n    const prPayload = github.context.payload.pull_request;\n    const prAction = github.context.payload.action;\n    const result = await runChecks(config);\n    const baseRows = buildSummaryRows(result.results);\n\n    const reportFileInput = core.getInput(\"report-file\") || \"overweight-report.json\";\n    const updateBaseline = core.getBooleanInput(\"update-baseline\");\n    const baselineReportPathInput = core.getInput(\"baseline-report-path\");\n    const shouldDefaultBaselinePath =\n      !baselineReportPathInput && updateBaseline && Boolean(reportFileInput);\n    const baselinePathCandidate = baselineReportPathInput || (shouldDefaultBaselinePath ? reportFileInput : null);\n\n    if (shouldDefaultBaselinePath) {\n      core.info(\n        `Overweight: baseline-report-path not provided, defaulting to report-file \"${reportFileInput}\".`\n      );\n    }\n\n    const baselinePath = baselinePathCandidate\n      ? path.resolve(config.root, baselinePathCandidate)\n      : null;\n    const baselineState = baselinePath ? await readBaselineState(baselinePath) : null;\n    const baselineData = baselineState?.data ?? null;\n    const baselineFileContent = baselineState ? baselineState.raw : undefined;\n    const summaryRows = mergeWithBaseline(baseRows, baselineData);\n    jsonFileReporter(result, {\n      reportFile: reportFileInput,\n      cwd: config.root,\n      silent: true\n    });\n    const resolvedReportPath = path.resolve(config.root, reportFileInput);\n\n    core.info(\n      `Overweight: processed ${result.results.length} entries (failures: ${result.stats.hasFailures})`\n    );\n    core.summary.addHeading(\"ðŸ§³ Overweight Size Report\");\n    core.summary.addTable(toTableData(summaryRows));\n    await core.summary.write();\n\n    const htmlTable = renderHtmlTable(summaryRows);\n\n    core.setOutput(\"report-json\", JSON.stringify({ rows: summaryRows, stats: result.stats }));\n    core.setOutput(\"report-table\", htmlTable);\n    core.setOutput(\"has-failures\", String(result.stats.hasFailures));\n    core.setOutput(\"report-file\", resolvedReportPath);\n\n    if (baselinePath) {\n      if (result.stats.hasFailures) {\n        core.info(\"Skipping baseline update because size checks failed.\");\n      } else if (!updateBaseline) {\n        core.info(\"update-baseline=false, skipping baseline write.\");\n      } else if (!githubToken || !octokit) {\n        core.setFailed(\"update-baseline requires github-token to be provided.\");\n      } else {\n        const { needsUpdate, content } = await getBaselineUpdateInfo(\n          baselinePath,\n          summaryRows,\n          baselineFileContent\n        );\n        const currentBranch = getBranchName() || \"unknown\";\n        const protectedPatterns = parseProtectedBranchPatterns(\n          core.getInput(\"baseline-protected-branches\")\n        );\n        const branchIsProtected = isBranchProtected(currentBranch, protectedPatterns);\n\n        core.info(\n          `Overweight: baseline path detected at ${baselinePath} (branch=${currentBranch}, needsUpdate=${needsUpdate})`\n        );\n\n        if (!needsUpdate) {\n          core.info(\"Baseline is already up to date; no changes written.\");\n        }\n        else if (branchIsProtected) {\n          core.info(\n            `Skipping baseline update because branch \"${currentBranch}\" matches baseline-protected-branches.`\n          );\n        } else {\n          const baseBranch = resolveBaseBranch();\n          const prTitleInput = core.getInput(\"update-pr-title\") || \"chore: update baseline report\";\n          const prTitle = `${prTitleInput} (ðŸ§³ Overweight Guard)`;\n          const prBody =\n            core.getInput(\"update-pr-body\") ||\n            \"Automatic pull request updating the baseline report.\";\n          const branchPrefix = core.getInput(\"update-branch-prefix\") || \"overweight/baseline\";\n          let prIdentifier = github.context.payload.pull_request?.number ?? null;\n\n          if (!prIdentifier) {\n            try {\n              prIdentifier = await findPrNumberForBranch({ octokit, branch: currentBranch });\n              if (prIdentifier) {\n                core.info(\n                  `Detected existing pull request #${prIdentifier} for branch ${currentBranch}.`\n                );\n              }\n            } catch (error) {\n              core.warning(\n                `Unable to infer pull request number for branch ${currentBranch}: ${error.message}`\n              );\n            }\n          }\n\n          const updateBranchName = buildUpdateBranchName({\n            prefix: branchPrefix,\n            prNumber: prIdentifier,\n            currentBranch\n          });\n          const repoRelativePath = ensureRelativePath(baselinePath);\n\n          await ensureUpdateBranchExists({\n            octokit,\n            branchName: updateBranchName,\n            baseBranch\n          });\n\n          const existingFileSha = await getExistingFileSha({\n            octokit,\n            branchName: updateBranchName,\n            path: repoRelativePath\n          });\n\n          await writeBaseline(baselinePath, summaryRows, content);\n          core.info(`Wrote updated baseline snapshot to ${baselinePath}`);\n\n          await octokit.rest.repos.createOrUpdateFileContents({\n            owner: github.context.repo.owner,\n            repo: github.context.repo.repo,\n            path: repoRelativePath,\n            message: prTitle,\n            content: Buffer.from(content, \"utf-8\").toString(\"base64\"),\n            branch: updateBranchName,\n            sha: existingFileSha,\n            committer: BOT_COMMIT_IDENTITY,\n            author: BOT_COMMIT_IDENTITY\n          });\n\n          let baselinePr =\n            (await findExistingBaselinePr({ octokit, branchName: updateBranchName })) || null;\n\n          if (!baselinePr) {\n            const prResponse = await octokit.rest.pulls.create({\n              owner: github.context.repo.owner,\n              repo: github.context.repo.repo,\n              head: updateBranchName,\n              base: baseBranch,\n              title: prTitle,\n              body: prBody\n            });\n            baselinePr = prResponse.data;\n            core.info(`Opened baseline update PR #${baselinePr.number} (${baselinePr.html_url})`);\n          } else {\n            core.info(\n              `Updated existing baseline PR #${baselinePr.number} (${baselinePr.html_url})`\n            );\n          }\n\n          core.setOutput(\"baseline-update-pr-number\", String(baselinePr.number));\n          core.setOutput(\"baseline-update-pr-url\", baselinePr.html_url);\n          core.setOutput(\"baseline-updated\", \"true\");\n        }\n      }\n    }\n\n    const existingComment =\n      octokit && prPayload ? await findExistingReportComment(octokit, prPayload) : null;\n\n    const shouldCommentOnSuccess =\n      prPayload &&\n      (commentOnEachRun || (commentOnFirstRun && prAction === \"opened\"));\n    const shouldCommentOnFailure = result.stats.hasFailures && commentOnFailure;\n    const shouldUpdateExisting =\n      Boolean(existingComment) && !result.stats.hasFailures && commentOnFailure;\n\n    if (octokit && (shouldCommentOnFailure || shouldCommentOnSuccess || shouldUpdateExisting)) {\n      const statusText = result.stats.hasFailures ?\n       \"Overweight: Size check failed\" :\n       \"Overweight: Size check passed\";\n\n      core.info(\n        `Overweight: preparing PR comment (failure=${result.stats.hasFailures}, existingComment=${Boolean(\n          existingComment\n        )}, forceUpdate=${shouldUpdateExisting})`\n      );\n\n      await commentOnPullRequest({\n        octokit,\n        pullRequest: prPayload,\n        body: `${statusText}:\\n\\n${htmlTable}`,\n        existingComment\n      });\n    }\n\n    if (result.stats.hasFailures) {\n      core.setFailed(\"One or more size checks failed.\");\n    }\n  } catch (error) {\n    core.setFailed(error.message);\n  }\n};\n\nexport default runAction;\n\nif (process.env.NODE_ENV !== \"test\") {\n  runAction();\n}\n\n"]}